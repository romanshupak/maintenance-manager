{% extends 'layouts/base_background.html' %}
{% load static %}

{% block title %}Maintenances{% endblock title %}
{% block body %}class="blog-author bg-gray-200"{% endblock body %}

{% block header %}
{% include 'includes/navigation.html' %}
{% endblock header %}

{% block content %}
<!-- -------- START HEADER 4 w/ search book a ticket form ------- -->
<header class="bg-gradient-dark">
  <div class="page-header min-vh-75" style="background-image: url('{% static 'img/city-profile.jpg' %}');">
    <span class="mask bg-gradient-dark opacity-6"></span>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 text-center mx-auto my-auto">
          <h1 class="text-white">Empowering excellence in every department</h1>
          <p class="lead mb-4 text-white opacity-8">Excellence through teamwork</p>
          <!-- Form for creating new maintenance under the phrase -->
          <div class="row mt-4 justify-content-center">
            <div class="col-lg-6">
              <form method="post" action="{% url 'maintenance:maintenance-create' %}">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="btn bg-white text-black-50">Create Maintenance</button>
              </form>
            </div>
          </div>
          <h6 class="text-white mb-2 mt-5">Find us on</h6>
          <div class="d-flex justify-content-center">
            <a href="https://www.facebook.com/profile.php?id=100005855806696" target="_blank"><i class="fab fa-facebook text-lg text-white me-4"></i></a>
            <a href="https://github.com/romanshupak" target="_blank"><i class="fab fa-github text-lg text-white me-4"></i></a>
            <a href="https://t.me/romanshu" target="_blank"><i class="fab fa-telegram text-lg text-white"></i></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>
<!-- -------- END HEADER 4 w/ search book a ticket form ------- -->

<div class="card card-body blur shadow-blur mx-3 mx-md-4 mt-n6 mb-4">
  <section class="py-3">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <h3 class="mb-5">Maintenance List</h3>
        </div>
      </div>
      <div class="row row-cols-1 row-cols-md-3 g-4">
        {% for maintenance in maintenance_list %}
          <div class="col">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">{{ maintenance.department }}</h5>
                <p class="card-text">{{ maintenance.name }}</p>
                <a href="{{ maintenance.get_absolute_url }}" class="btn btn-primary">View Details</a>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
</div>

{% if maintenance_list.has_other_pages %}
  <div class="pagination">
    <span class="step-links">
      {% if maintenance_list.has_previous %}
        <a href="?page=1" style="color: #3498db;">&laquo; first</a>
        <a href="?page={{ maintenance_list.previous_page_number }}" style="color: #3498db;">previous</a>
      {% endif %}

      <span class="current" style="color: #2ecc71;">
         {{ maintenance_list.number }}  {{ maintenance_list.paginator.num_pages }}
      </span>

      {% if maintenance_list.has_next %}
        <a href="?page={{ maintenance_list.next_page_number }}" style="color: #3498db;">next</a>
        <a href="?page={{ maintenance_list.paginator.num_pages }}" style="color: #3498db;">last &raquo;</a>
      {% endif %}
    </span>
  </div>
{% endif %}

{% endblock content %}

{% block footer %}
{% include 'includes/footer_background.html' %}
{% endblock footer %}









